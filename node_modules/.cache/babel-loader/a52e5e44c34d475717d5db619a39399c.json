{"ast":null,"code":"var _jsxFileName = \"/home/vignesh/personal/diagnal-ott-without-tailwind/src/views/Home/index.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport axios from 'axios';\nimport Header from '../Header';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addContents } from \"../../actions\";\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nimport 'react-lazy-load-image-component/src/effects/blur.css';\nimport useInView from \"react-cool-inview\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Home(props) {\n  _s();\n\n  const dispatch = useDispatch();\n  let hasMore = React.useRef(true);\n  let page = React.useRef(1);\n  const [loading, setLoading] = React.useState(false);\n  let contents = useSelector(state => state.contentReducer.contents);\n  let filteredContents = useSelector(state => state.contentReducer.filtered);\n  let searchKey = useSelector(state => state.contentReducer.searchKey);\n\n  if (searchKey !== '') {\n    contents = filteredContents;\n    window['scrollTo']({\n      top: 0,\n      behavior: 'smooth'\n    });\n  }\n\n  React.useEffect(() => {\n    window['scrollTo']({\n      top: 0,\n      behavior: 'smooth'\n    });\n    getContent();\n    return () => {\n      page.current = 1;\n      hasMore.current = true;\n    };\n  }, []);\n  const {\n    observe\n  } = useInView({\n    rootMargin: \"50px 0px\",\n    onEnter: _ref => {\n      let {\n        unobserve,\n        observe\n      } = _ref;\n      unobserve();\n      getContent();\n      observe();\n    }\n  });\n\n  const getContent = async () => {\n    if (!loading && hasMore.current) {\n      setLoading(true);\n\n      try {\n        if (page.current === 1) {\n          dispatch(addContents([]));\n        }\n\n        let url = 'data/CONTENTLISTINGPAGE-PAGE' + page.current + '.json';\n        const result = await axios.get(url);\n\n        if (result !== undefined && result !== null && result.status !== undefined && result.status !== null && result.status === 200 && result.data !== undefined && result.data !== null && result.data.page !== undefined && result.data.page !== null && result.data.page['content-items'] !== undefined && result.data.page['content-items'] !== null && result.data.page['content-items'].content !== undefined && result.data.page['content-items'].content !== null && result.data.page['content-items'].content.length > 0) {\n          page.current = parseInt(page.current) + 1;\n          dispatch(addContents(result.data.page['content-items'].content));\n        } else {\n          hasMore.current = false;\n        }\n\n        setLoading(false);\n      } catch (e) {\n        hasMore.current = false;\n        setLoading(false);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container contentsection\",\n      id: \"content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: contents.length > 0 && contents.map((content, index) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-4 content-card\",\n            ref: index === contents.length - 1 ? observe : null,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \" relative\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \" inset-0  w-full\",\n                children: [/*#__PURE__*/_jsxDEV(LazyLoadImage, {\n                  alt: '...',\n                  effect: \"blur\",\n                  src: 'static/images/' + content['poster-image'],\n                  placeholderSrc: 'static/images/placeholder_for_missing_posters.png',\n                  className: \"posterimg overflow-hidden\",\n                  height: \"150px\",\n                  width: \"100px\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 81,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex flex-col\",\n                  children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                    className: \"content-name\",\n                    children: content.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 91,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 37\n            }, this)\n          }, 'list-' + index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Home, \"8H94ehI4Ke89wab3+pi0/6eTVw8=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useInView];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/vignesh/personal/diagnal-ott-without-tailwind/src/views/Home/index.js"],"names":["React","axios","Header","useDispatch","useSelector","addContents","LazyLoadImage","useInView","Home","props","dispatch","hasMore","useRef","page","loading","setLoading","useState","contents","state","contentReducer","filteredContents","filtered","searchKey","window","top","behavior","useEffect","getContent","current","observe","rootMargin","onEnter","unobserve","url","result","get","undefined","status","data","content","length","parseInt","e","map","index","name"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport Header from '../Header'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { addContents } from \"../../actions\"\nimport { LazyLoadImage } from 'react-lazy-load-image-component'\nimport 'react-lazy-load-image-component/src/effects/blur.css'\nimport useInView from \"react-cool-inview\"\n\nfunction Home(props) {\n\n    const dispatch = useDispatch()\n    let hasMore = React.useRef(true)\n    let page = React.useRef(1)\n    const [loading, setLoading] = React.useState(false)\n\n    let contents = useSelector(state => state.contentReducer.contents)\n    let filteredContents = useSelector(state => state.contentReducer.filtered)\n    let searchKey = useSelector(state => state.contentReducer.searchKey)\n\n    if (searchKey !== '') {\n        contents = filteredContents\n        window['scrollTo']({ top: 0, behavior: 'smooth' })\n    }\n\n    React.useEffect(() => {\n        window['scrollTo']({ top: 0, behavior: 'smooth' })\n        getContent()\n        return () => {\n            page.current = 1\n            hasMore.current = true\n        }\n    }, [])\n\n\n    const { observe } = useInView({\n        rootMargin: \"50px 0px\",\n        onEnter: ({ unobserve, observe }) => {\n            unobserve();\n            getContent()\n            observe();\n        },\n    });\n\n    const getContent = async () => {\n\n        if (!loading && hasMore.current) {\n            setLoading(true)\n            try {\n                if (page.current === 1) {\n                    dispatch(addContents([]))\n                }\n                let url = 'data/CONTENTLISTINGPAGE-PAGE' + page.current+'.json'\n                const result = await axios.get(url);\n                if (result !== undefined && result !== null && result.status !== undefined && result.status !== null && result.status === 200 && result.data !== undefined && result.data !== null && result.data.page !== undefined && result.data.page !== null && result.data.page['content-items'] !== undefined && result.data.page['content-items'] !== null && result.data.page['content-items'].content !== undefined && result.data.page['content-items'].content !== null && result.data.page['content-items'].content.length > 0) {\n                    page.current = parseInt(page.current) + 1\n                    dispatch(addContents(result.data.page['content-items'].content))\n                } else {\n                    hasMore.current = false\n                }\n                setLoading(false)\n            } catch(e) {\n                hasMore.current = false\n                setLoading(false)\n            }\n        }\n    }\n\n\n    return (\n        <React.Fragment>\n            <Header />\n            <div className=\"container contentsection\" id='content'>\n                <div className='row'>\n                    {contents.length > 0 && (\n                        contents.map((content, index) => {\n                            return (\n                                <div className=\"col-4 content-card\" ref={index === contents.length - 1 ? observe : null} key={'list-'+index}>\n                                    <div className=\" relative\">\n                                        <div className=\" inset-0  w-full\">\n                                            <LazyLoadImage\n                                                alt={'...'}\n                                                effect=\"blur\"\n                                                src={'static/images/' + content['poster-image']}\n                                                placeholderSrc={'static/images/placeholder_for_missing_posters.png'}\n                                                className=\"posterimg overflow-hidden\"\n                                                height='150px'\n                                                width='100px'\n                                            />\n                                            <div className=\"flex flex-col\">\n                                                <h2 className=\"content-name\">{content.name}</h2>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            )\n                        })\n                    )}\n                </div>\n            </div>\n        </React.Fragment>\n        \n    )\n}\n\nexport default Home"]},"metadata":{},"sourceType":"module"}