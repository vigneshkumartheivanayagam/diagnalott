{"ast":null,"code":"import _regeneratorRuntime from\"/home/vignesh/personal/diagnal-ott-without-tailwind/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/vignesh/personal/diagnal-ott-without-tailwind/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import axios from'axios';import Header from'../Header';import Contents from'./Contents';import{useDispatch}from'react-redux';import{addContents}from\"../../actions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(props){var dispatch=useDispatch();var hasMore=React.useRef(true);var page=React.useRef(1);React.useEffect(function(){window.addEventListener('scroll',handleScroll);window['scrollTo']({top:0,behavior:'smooth'});setTimeout(function(){getContent();},1000);return function(){page.current=1;hasMore.current=true;};},[]);var getContent=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!hasMore.current){_context.next=7;break;}url='data/CONTENTLISTINGPAGE-PAGE'+page.current+'.json';_context.next=5;return axios.get(url);case 5:result=_context.sent;if(result!==undefined&&result!==null&&result.status!==undefined&&result.status!==null&&result.status===200&&result.data!==undefined&&result.data!==null&&result.data.page!==undefined&&result.data.page!==null&&result.data.page['content-items']!==undefined&&result.data.page['content-items']!==null&&result.data.page['content-items'].content!==undefined&&result.data.page['content-items'].content!==null&&result.data.page['content-items'].content.length>0){page.current=parseInt(page.current)+1;dispatch(addContents(result.data.page['content-items'].content));}else{hasMore.current=false;}case 7:_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);hasMore.current=false;case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function getContent(){return _ref.apply(this,arguments);};}();var handleScroll=function handleScroll(e){if(window.innerHeight+window.scrollY>=document.body.offsetHeight){getContent();}};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container contentsection \",children:/*#__PURE__*/_jsx(Contents,{getContent:getContent})})]});}export default Home;","map":{"version":3,"sources":["/home/vignesh/personal/diagnal-ott-without-tailwind/src/views/Home/index.js"],"names":["React","axios","Header","Contents","useDispatch","addContents","Home","props","dispatch","hasMore","useRef","page","useEffect","window","addEventListener","handleScroll","top","behavior","setTimeout","getContent","current","url","get","result","undefined","status","data","content","length","parseInt","e","innerHeight","scrollY","document","body","offsetHeight"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport Header from '../Header'\nimport Contents from './Contents'\nimport { useDispatch } from 'react-redux'\nimport { addContents } from \"../../actions\"\n\nfunction Home(props) {\n\n    const dispatch = useDispatch()\n    let hasMore = React.useRef(true)\n    let page = React.useRef(1)\n\n    React.useEffect(() => {\n        window.addEventListener('scroll', handleScroll)\n        window['scrollTo']({ top: 0, behavior: 'smooth' })\n\n        setTimeout(function() {\n            getContent()\n        }, 1000)\n\n        return () => {\n            page.current = 1\n            hasMore.current = true\n        }\n    }, [])\n\n    const getContent = async () => {\n\n        try {\n            if (hasMore.current) {\n                let url = 'data/CONTENTLISTINGPAGE-PAGE' + page.current+'.json'\n                const result = await axios.get(url);\n                if (result !== undefined && result !== null && result.status !== undefined && result.status !== null && result.status === 200 && result.data !== undefined && result.data !== null && result.data.page !== undefined && result.data.page !== null && result.data.page['content-items'] !== undefined && result.data.page['content-items'] !== null && result.data.page['content-items'].content !== undefined && result.data.page['content-items'].content !== null && result.data.page['content-items'].content.length > 0) {\n                    page.current = parseInt(page.current) + 1\n                    dispatch(addContents(result.data.page['content-items'].content))\n                } else {\n                    hasMore.current = false\n                }\n            }\n        } catch(e) {\n            hasMore.current = false\n        }\n    }\n\n    const handleScroll = (e) => {\n        if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {\n            getContent()\n        }\n    };\n\n    return (\n        <React.Fragment>\n            <Header />\n            <div className=\"container contentsection \">\n                <Contents getContent={getContent} />\n            </div>\n        </React.Fragment>\n        \n    )\n}\n\nexport default Home"]},"metadata":{},"sourceType":"module"}