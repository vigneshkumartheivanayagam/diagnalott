{"ast":null,"code":"var _jsxFileName = \"/home/vignesh/personal/diagnal-ott-without-tailwind/src/views/Home/index.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport axios from 'axios';\nimport Header from '../Header';\nimport Contents from './Contents';\nimport { useDispatch } from 'react-redux';\nimport { addContents } from \"../../actions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Home(props) {\n  _s();\n\n  const dispatch = useDispatch();\n  let hasMore = React.useRef(true);\n  let page = React.useRef(1);\n  const [loading, setLoading] = React.useState(false);\n  React.useEffect(() => {\n    var el = document.getElementById('content');\n    el.addEventListener('scroll', handleScroll);\n    window['scrollTo']({\n      top: 0,\n      behavior: 'smooth'\n    });\n    setTimeout(function () {\n      getContent();\n    }, 1000);\n    return () => {\n      page.current = 1;\n      hasMore.current = true;\n    };\n  }, []);\n\n  const getContent = async () => {\n    if (!loading && hasMore.current) {\n      setLoading(true);\n\n      try {\n        if (page.current === 1) {\n          dispatch(addContents([]));\n        }\n\n        let url = 'data/CONTENTLISTINGPAGE-PAGE' + page.current + '.json';\n        const result = await axios.get(url);\n\n        if (result !== undefined && result !== null && result.status !== undefined && result.status !== null && result.status === 200 && result.data !== undefined && result.data !== null && result.data.page !== undefined && result.data.page !== null && result.data.page['content-items'] !== undefined && result.data.page['content-items'] !== null && result.data.page['content-items'].content !== undefined && result.data.page['content-items'].content !== null && result.data.page['content-items'].content.length > 0) {\n          page.current = parseInt(page.current) + 1;\n          dispatch(addContents(result.data.page['content-items'].content));\n        } else {\n          hasMore.current = false;\n        }\n\n        setLoading(false);\n      } catch (e) {\n        hasMore.current = false;\n        setLoading(false);\n      }\n    }\n  };\n\n  const handleScroll = e => {\n    // if (window.innerHeight + window.scrollY >= (document.body.offsetHeight - 10)) {\n    //     alert(\"Condition satisfied\")\n    //     getContent()\n    // }\n    // var pageHeight = document.documentElement.offsetHeight,\n    //     windowHeight = window.innerHeight,\n    //     scrollPosition = window.scrollY || window.pageYOffset || document.body.scrollTop + (document.documentElement && document.documentElement.scrollTop || 0);\n    // // document.getElementById(\"val\").innerHTML = pageHeight + ',' + windowHeight + ',' + scrollPosition;\n    // if (pageHeight <= windowHeight + scrollPosition) {\n    //     alert('At the bottom');\n    //     getContent()\n    // }\n    // const bottom = e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight;\n    // console.log(\"bottom ===> \", bottom)\n    // if (window.innerHeight + document.documentElement.scrollTop === document.scrollingElement.scrollHeight) {\n    //     getContent()\n    // }\n    // var content = document.getElementById('content')\n    // var contentHeight = content.offsetHeight\n    // var yOffset = window.pageYOffset\n    // var y = yOffset + window.innerHeight\n    // if(y >= contentHeight) {\n    //     getContent()\n    // }\n    // const scrollbale = document.documentElement.scrollHeight - window.innerHeight\n    // const scrolled = window.scrollY\n    // if(scrolled === scrollbale) {\n    //     getContent()\n    // }\n    if (e.target.clientHeight + e.target.scrollTop === e.target.scrollHeight) {\n      getContent();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container contentsection\",\n      id: \"content\",\n      children: /*#__PURE__*/_jsxDEV(Contents, {\n        getContent: getContent,\n        hasMore: hasMore\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Home, \"vaCkBEhKFo/uccgXBpdf2LI3T/0=\", false, function () {\n  return [useDispatch];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/vignesh/personal/diagnal-ott-without-tailwind/src/views/Home/index.js"],"names":["React","axios","Header","Contents","useDispatch","addContents","Home","props","dispatch","hasMore","useRef","page","loading","setLoading","useState","useEffect","el","document","getElementById","addEventListener","handleScroll","window","top","behavior","setTimeout","getContent","current","url","result","get","undefined","status","data","content","length","parseInt","e","target","clientHeight","scrollTop","scrollHeight"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport Header from '../Header'\nimport Contents from './Contents'\nimport { useDispatch } from 'react-redux'\nimport { addContents } from \"../../actions\"\n\nfunction Home(props) {\n\n    const dispatch = useDispatch()\n    let hasMore = React.useRef(true)\n    let page = React.useRef(1)\n    const [loading, setLoading] = React.useState(false)\n\n    React.useEffect(() => {\n\n        var el = document.getElementById('content')\n        el.addEventListener('scroll', handleScroll)\n        window['scrollTo']({ top: 0, behavior: 'smooth' })\n\n        setTimeout(function() {\n            getContent()\n        }, 1000)\n\n        return () => {\n            page.current = 1\n            hasMore.current = true\n        }\n    }, [])\n\n    const getContent = async () => {\n\n        if (!loading && hasMore.current) {\n            setLoading(true)\n            try {\n                if (page.current === 1) {\n                    dispatch(addContents([]))\n                }\n                let url = 'data/CONTENTLISTINGPAGE-PAGE' + page.current+'.json'\n                const result = await axios.get(url);\n                if (result !== undefined && result !== null && result.status !== undefined && result.status !== null && result.status === 200 && result.data !== undefined && result.data !== null && result.data.page !== undefined && result.data.page !== null && result.data.page['content-items'] !== undefined && result.data.page['content-items'] !== null && result.data.page['content-items'].content !== undefined && result.data.page['content-items'].content !== null && result.data.page['content-items'].content.length > 0) {\n                    page.current = parseInt(page.current) + 1\n                    dispatch(addContents(result.data.page['content-items'].content))\n                } else {\n                    hasMore.current = false\n                }\n                setLoading(false)\n            } catch(e) {\n                hasMore.current = false\n                setLoading(false)\n            }\n        }\n    }\n\n    const handleScroll = (e) => {\n        // if (window.innerHeight + window.scrollY >= (document.body.offsetHeight - 10)) {\n        //     alert(\"Condition satisfied\")\n        //     getContent()\n        // }\n\n        // var pageHeight = document.documentElement.offsetHeight,\n        //     windowHeight = window.innerHeight,\n        //     scrollPosition = window.scrollY || window.pageYOffset || document.body.scrollTop + (document.documentElement && document.documentElement.scrollTop || 0);\n\n        // // document.getElementById(\"val\").innerHTML = pageHeight + ',' + windowHeight + ',' + scrollPosition;\n\n\n        // if (pageHeight <= windowHeight + scrollPosition) {\n        //     alert('At the bottom');\n        //     getContent()\n        // }\n\n        // const bottom = e.target.scrollHeight - e.target.scrollTop === e.target.clientHeight;\n\n        // console.log(\"bottom ===> \", bottom)\n\n        // if (window.innerHeight + document.documentElement.scrollTop === document.scrollingElement.scrollHeight) {\n        //     getContent()\n        // }\n\n        // var content = document.getElementById('content')\n        // var contentHeight = content.offsetHeight\n        // var yOffset = window.pageYOffset\n        // var y = yOffset + window.innerHeight\n\n        // if(y >= contentHeight) {\n        //     getContent()\n        // }\n\n        // const scrollbale = document.documentElement.scrollHeight - window.innerHeight\n        // const scrolled = window.scrollY\n\n        // if(scrolled === scrollbale) {\n        //     getContent()\n        // }\n\n        if (e.target.clientHeight + e.target.scrollTop === e.target.scrollHeight) {  \n            getContent()\n        }\n\n    };\n\n\n    return (\n        <React.Fragment>\n            <Header />\n            <div className=\"container contentsection\" id='content'>\n                <Contents getContent={getContent} hasMore={hasMore} />\n            </div>\n        </React.Fragment>\n        \n    )\n}\n\nexport default Home"]},"metadata":{},"sourceType":"module"}