"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("react");function e(){return e=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},e.apply(this,arguments)}var t=function(e){var t=r.useRef(e);return t.current=e,t},n="ðŸ’¡ react-cool-inview: the browser doesn't support Intersection Observer, please install polyfill: https://github.com/wellyshen/react-cool-inview#intersection-observer-polyfill",o="ðŸ’¡ react-cool-inview: the browser doesn't support Intersection Observer v2, fallback to v1 behavior";exports.default=function(i){var c=void 0===i?{}:i,u=c.root,s=c.rootMargin,l=c.threshold,a=void 0===l?0:l,v=c.trackVisibility,b=c.delay,f=c.unobserveOnEnter,y=c.onChange,p=c.onEnter,d=c.onLeave,h=r.useState({inView:!1,scrollDirection:{}}),w=h[0],g=h[1],O=r.useRef(!1),x=r.useRef({}),R=r.useRef(),k=r.useRef(!1),C=t(y),I=t(p),V=t(d),E=r.useRef(),M=r.useCallback((function(){R.current&&(R.current.disconnect(),x.current={})}),[]),j=r.useCallback((function(r){r&&r!==E.current&&(M(),E.current=r),R.current&&E.current&&R.current.observe(E.current)}),[M]),D=r.useCallback((function(){if(E.current){var r=E.current.getBoundingClientRect(),e=r.x,t=r.y;x.current={x:e,y:t}}}),[E]);return r.useEffect((function(){return"IntersectionObserver"in window&&"IntersectionObserverEntry"in window?(R.current=new IntersectionObserver((function(r){var t=r[0],n=t.intersectionRatio,i=t.isIntersecting,c=t.boundingClientRect,u=c.x,s=c.y,l=t.isVisible,b={},y=Array.isArray(a)?Math.min.apply(Math,a):a,p=void 0!==i?i:n>0;p=y>0?n>=y:p,u<x.current.x&&(b.horizontal="left"),u>x.current.x&&(b.horizontal="right"),x.current.x=u,s<x.current.y&&(b.vertical="up"),s>x.current.y&&(b.vertical="down"),x.current.y=s;var d={entry:t,scrollDirection:b,observe:j,unobserve:M};v&&(void 0!==l||k.current||(console.warn(o),k.current=!0),void 0!==l&&(p=l)),p&&!O.current&&(f&&M(),I.current&&I.current(d)),!p&&O.current&&V.current&&V.current(d),C.current&&C.current(e({},d,{inView:p})),g({inView:p,scrollDirection:b,entry:t}),O.current=p}),{root:u,rootMargin:s,threshold:a,trackVisibility:v,delay:b}),j(),function(){return M()}):(console.error(n),function(){return null})}),[f,u,s,JSON.stringify(a),v,b,j,M]),e({},w,{observe:j,unobserve:M,updatePosition:D})},exports.observerErr=n,exports.observerWarn=o;
